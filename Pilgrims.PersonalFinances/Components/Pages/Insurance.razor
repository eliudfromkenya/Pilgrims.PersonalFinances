@page "/insurance"
@using Pilgrims.PersonalFinances.Models
@using Pilgrims.PersonalFinances.Core.Models.Enums

<PageTitle>Insurance - Pilgrims Personal Finance</PageTitle>

<!-- Particle Background -->
<div class="fixed inset-0 overflow-hidden pointer-events-none">
    <div class="absolute inset-0 bg-gradient-to-br from-cyan-50 via-sky-50 to-blue-50 dark:from-gray-900 dark:via-cyan-900 dark:to-blue-900"></div>
    <div class="particles-container">
        @for (int i = 0; i < 25; i++)
        {
            <div class="particle" style="animation-delay: @(i * 0.15)s;"></div>
        }
    </div>
</div>

<!-- Main Content -->
<div class="relative z-10 min-h-screen p-6">
    <!-- Header Section -->
    <div class="mb-8">
        <div class="glass-card p-6 rounded-2xl border border-white/20 backdrop-blur-lg bg-white/10 dark:bg-gray-800/10">
            <div class="flex items-center justify-between mb-4">
                <div>
                    <h1 class="text-4xl font-bold bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent">
                        üõ°Ô∏è Insurance Center
                    </h1>
                    <p class="text-gray-600 dark:text-gray-300 mt-2">Protect your assets and manage your coverage</p>
                </div>
                <button class="px-6 py-3 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-xl hover:shadow-lg transform hover:scale-105 transition-all duration-300">
                    <span class="mr-2">‚ûï</span> Add Policy
                </button>
            </div>
            
            <!-- Insurance Overview Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mt-6">
                <div class="bg-gradient-to-r from-cyan-400 to-cyan-600 p-4 rounded-xl text-white">
                    <div class="text-sm opacity-90">Total Coverage</div>
                    <div class="text-2xl font-bold">$2,450,000</div>
                    <div class="text-xs opacity-75 mt-1">üõ°Ô∏è Comprehensive protection</div>
                </div>
                <div class="bg-gradient-to-r from-blue-400 to-blue-600 p-4 rounded-xl text-white">
                    <div class="text-sm opacity-90">Annual Premiums</div>
                    <div class="text-2xl font-bold">$8,450.00</div>
                    <div class="text-xs opacity-75 mt-1">Monthly: $704.17</div>
                </div>
                <div class="bg-gradient-to-r from-indigo-400 to-indigo-600 p-4 rounded-xl text-white">
                    <div class="text-sm opacity-90">Active Policies</div>
                    <div class="text-2xl font-bold">7</div>
                    <div class="text-xs opacity-75 mt-1">All current</div>
                </div>
                <div class="bg-gradient-to-r from-purple-400 to-purple-600 p-4 rounded-xl text-white">
                    <div class="text-sm opacity-90">Claims This Year</div>
                    <div class="text-2xl font-bold">2</div>
                    <div class="text-xs opacity-75 mt-1">$3,200 claimed</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Coverage Overview & Premium Trends -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
        <!-- Coverage Breakdown -->
        <div class="glass-card p-6 rounded-2xl border border-white/20 backdrop-blur-lg bg-white/10 dark:bg-gray-800/10">
            <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                <span class="mr-2">üìä</span> Coverage Breakdown
            </h3>
            <div class="space-y-4">
                @{
                    var coverageTypes = new[]
                    {
                        new { Name = "Home Insurance", Coverage = 1500000, Premium = 2400, Color = "from-blue-400 to-blue-600", Percentage = 61, Icon = "üè†" },
                        new { Name = "Auto Insurance", Coverage = 500000, Premium = 1800, Color = "from-green-400 to-green-600", Percentage = 20, Icon = "üöó" },
                        new { Name = "Life Insurance", Coverage = 300000, Premium = 2400, Color = "from-purple-400 to-purple-600", Percentage = 12, Icon = "‚ù§Ô∏è" },
                        new { Name = "Health Insurance", Coverage = 100000, Premium = 1200, Color = "from-red-400 to-red-600", Percentage = 4, Icon = "üè•" },
                        new { Name = "Umbrella Policy", Coverage = 50000, Premium = 650, Color = "from-orange-400 to-orange-600", Percentage = 3, Icon = "‚òÇÔ∏è" }
                    };
                }
                @foreach (var coverage in coverageTypes)
                {
                    <div class="flex items-center justify-between">
                        <div class="flex items-center flex-1">
                            <span class="text-2xl mr-3">@coverage.Icon</span>
                            <span class="text-gray-700 dark:text-gray-300 flex-1">@coverage.Name</span>
                            <div class="w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-2 mx-3">
                                <div class="bg-gradient-to-r @coverage.Color h-2 rounded-full transition-all duration-1000" 
                                     style="width: @(coverage.Percentage)%"></div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="font-semibold">$@coverage.Coverage</div>
                            <div class="text-xs text-gray-500">$@coverage.Premium/year</div>
                        </div>
                    </div>
                }
            </div>
        </div>

        <!-- Premium Trends -->
        <div class="glass-card p-6 rounded-2xl border border-white/20 backdrop-blur-lg bg-white/10 dark:bg-gray-800/10">
            <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                <span class="mr-2">üìà</span> Premium Trends (12 Months)
            </h3>
            <div class="h-48 flex items-end justify-between space-x-2">
                @{
                    var months = new[] { "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" };
                    var premiums = new[] { 704, 704, 704, 720, 720, 720, 735, 735, 735, 750, 750, 704 };
                    var maxPremium = premiums.Max();
                }
                @for (int i = 0; i < 12; i++)
                {
                    var height = (premiums[i] / (double)maxPremium) * 100;
                    
                    <div class="flex-1 flex flex-col items-center">
                        <div class="bg-gradient-to-t from-cyan-500 to-blue-600 rounded-t-lg transition-all duration-1000 hover:shadow-lg w-full" 
                             style="height: @(height)%; animation-delay: @(i * 0.05)s;">
                        </div>
                        <span class="text-xs text-gray-500 mt-2">@months[i]</span>
                        <span class="text-xs font-medium text-gray-700 dark:text-gray-300">$@premiums[i]</span>
                    </div>
                }
            </div>
        </div>
    </div>

    <!-- Active Policies -->
    <div class="glass-card p-6 rounded-2xl border border-white/20 backdrop-blur-lg bg-white/10 dark:bg-gray-800/10 mb-8">
        <div class="flex items-center justify-between mb-6">
            <h3 class="text-xl font-semibold text-gray-800 dark:text-white flex items-center">
                <span class="mr-2">üìã</span> Active Policies
            </h3>
            <div class="flex items-center space-x-2">
                <button class="px-3 py-1 text-sm bg-cyan-100 text-cyan-800 rounded-full">All</button>
                <button class="px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded-full">Auto</button>
                <button class="px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded-full">Home</button>
                <button class="px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded-full">Life</button>
            </div>
        </div>
        
        <div class="space-y-3">
            @{
                var policies = new[]
                {
                    new { Name = "Homeowners Insurance", Provider = "State Farm", PolicyNumber = "HO-2023-001", Coverage = "$1,500,000", Premium = "$2,400/year", RenewalDate = "Mar 15, 2024", Status = "Active", Icon = "üè†" },
                    new { Name = "Auto Insurance - Tesla", Provider = "GEICO", PolicyNumber = "AU-2023-002", Coverage = "$300,000", Premium = "$1,200/year", RenewalDate = "Jan 20, 2024", Status = "Active", Icon = "üöó" },
                    new { Name = "Auto Insurance - Honda", Provider = "GEICO", PolicyNumber = "AU-2023-003", Coverage = "$200,000", Premium = "$600/year", RenewalDate = "Jan 20, 2024", Status = "Active", Icon = "üöô" },
                    new { Name = "Term Life Insurance", Provider = "Northwestern Mutual", PolicyNumber = "LI-2023-004", Coverage = "$300,000", Premium = "$2,400/year", RenewalDate = "Jun 10, 2024", Status = "Active", Icon = "‚ù§Ô∏è" },
                    new { Name = "Health Insurance", Provider = "Blue Cross Blue Shield", PolicyNumber = "HI-2023-005", Coverage = "$100,000", Premium = "$1,200/year", RenewalDate = "Dec 31, 2023", Status = "Expiring Soon", Icon = "üè•" },
                    new { Name = "Umbrella Policy", Provider = "Allstate", PolicyNumber = "UM-2023-006", Coverage = "$50,000", Premium = "$650/year", RenewalDate = "Aug 5, 2024", Status = "Active", Icon = "‚òÇÔ∏è" },
                    new { Name = "Disability Insurance", Provider = "Guardian", PolicyNumber = "DI-2023-007", Coverage = "$5,000/month", Premium = "$800/year", RenewalDate = "Nov 12, 2024", Status = "Active", Icon = "ü¶Ω" }
                };
            }
            
            @foreach (var policy in policies)
            {
                <div class="flex items-center justify-between p-4 bg-white/50 dark:bg-gray-700/50 rounded-xl hover:bg-white/70 dark:hover:bg-gray-700/70 transition-all duration-200 cursor-pointer group">
                    <div class="flex items-center flex-1">
                        <div class="w-12 h-12 bg-gradient-to-r from-cyan-100 to-blue-200 dark:from-cyan-600 dark:to-blue-700 rounded-full flex items-center justify-center text-2xl mr-4 group-hover:scale-110 transition-transform duration-200">
                            @policy.Icon
                        </div>
                        <div class="flex-1">
                            <div class="font-medium text-gray-800 dark:text-white">@policy.Name</div>
                            <div class="text-sm text-gray-500">@policy.Provider ‚Ä¢ @policy.PolicyNumber</div>
                        </div>
                        <div class="text-sm text-gray-600 dark:text-gray-300 mr-4">
                            <div>Coverage: @policy.Coverage</div>
                            <div class="text-xs">Premium: @policy.Premium</div>
                        </div>
                        <div class="text-sm text-gray-600 dark:text-gray-300 mr-4">
                            <div>Renews: @policy.RenewalDate</div>
                            <div class="text-xs @(policy.Status == "Expiring Soon" ? "text-red-500" : "text-green-500")">
                                @policy.Status
                            </div>
                        </div>
                    </div>
                    <div class="ml-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                        <button class="p-2 text-gray-400 hover:text-gray-600">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            }
        </div>
    </div>

    <!-- Claims & Alerts -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
        <!-- Recent Claims -->
        <div class="glass-card p-6 rounded-2xl border border-white/20 backdrop-blur-lg bg-white/10 dark:bg-gray-800/10">
            <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                <span class="mr-2">üìÑ</span> Recent Claims
            </h3>
            <div class="space-y-3">
                @{
                    var claims = new[]
                    {
                        new { ClaimNumber = "CLM-2023-001", Type = "Auto", Description = "Minor fender bender", Amount = 2800, Status = "Approved", Date = "Nov 15, 2023", Icon = "üöó" },
                        new { ClaimNumber = "CLM-2023-002", Type = "Home", Description = "Water damage repair", Amount = 1200, Status = "Processing", Date = "Oct 28, 2023", Icon = "üè†" },
                        new { ClaimNumber = "CLM-2023-003", Type = "Health", Description = "Emergency room visit", Amount = 850, Status = "Paid", Date = "Sep 12, 2023", Icon = "üè•" }
                    };
                }
                
                @foreach (var claim in claims)
                {
                    <div class="flex items-center justify-between p-3 bg-white/50 dark:bg-gray-700/50 rounded-lg hover:bg-white/70 dark:hover:bg-gray-700/70 transition-all duration-200">
                        <div class="flex items-center">
                            <span class="text-xl mr-3">@claim.Icon</span>
                            <div>
                                <h4 class="font-medium text-gray-800 dark:text-white">@claim.Description</h4>
                                <p class="text-sm text-gray-500">@claim.ClaimNumber ‚Ä¢ @claim.Date</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="font-bold text-gray-800 dark:text-white">$@claim.Amount</div>
                            <div class="text-xs @(claim.Status == "Approved" || claim.Status == "Paid" ? "text-green-500" : claim.Status == "Processing" ? "text-yellow-500" : "text-red-500")">
                                @claim.Status
                            </div>
                        </div>
                    </div>
                }
            </div>
            
            <button class="w-full mt-4 px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-lg hover:shadow-lg transform hover:scale-105 transition-all duration-300 text-sm">
                File New Claim
            </button>
        </div>

        <!-- Insurance Alerts -->
        <div class="glass-card p-6 rounded-2xl border border-white/20 backdrop-blur-lg bg-white/10 dark:bg-gray-800/10">
            <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                <span class="mr-2">üîî</span> Insurance Alerts
            </h3>
            <div class="space-y-4">
                <div class="flex items-start space-x-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg">
                    <span class="text-red-600 text-xl">‚ö†Ô∏è</span>
                    <div>
                        <h4 class="font-medium text-red-800 dark:text-red-300">Policy Expiring Soon</h4>
                        <p class="text-sm text-red-600 dark:text-red-400">Your health insurance expires on Dec 31, 2023. Renew now to avoid coverage gaps.</p>
                    </div>
                </div>
                
                <div class="flex items-start space-x-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg">
                    <span class="text-yellow-600 text-xl">üí∞</span>
                    <div>
                        <h4 class="font-medium text-yellow-800 dark:text-yellow-300">Premium Increase</h4>
                        <p class="text-sm text-yellow-600 dark:text-yellow-400">Your auto insurance premium will increase by $50/month starting next renewal.</p>
                    </div>
                </div>
                
                <div class="flex items-start space-x-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                    <span class="text-blue-600 text-xl">üí°</span>
                    <div>
                        <h4 class="font-medium text-blue-800 dark:text-blue-300">Coverage Recommendation</h4>
                        <p class="text-sm text-blue-600 dark:text-blue-400">Consider increasing your home insurance coverage based on recent property value increases.</p>
                    </div>
                </div>
                
                <div class="flex items-start space-x-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg">
                    <span class="text-green-600 text-xl">üéâ</span>
                    <div>
                        <h4 class="font-medium text-green-800 dark:text-green-300">Discount Available</h4>
                        <p class="text-sm text-green-600 dark:text-green-400">You qualify for a safe driver discount! Save up to 15% on your auto insurance.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
        <div class="glass-card p-6 rounded-2xl border border-white/20 backdrop-blur-lg bg-white/10 dark:bg-gray-800/10 text-center hover:shadow-xl transition-all duration-300 cursor-pointer">
            <div class="text-4xl mb-3">üìã</div>
            <h4 class="font-semibold text-gray-800 dark:text-white mb-2">Policy Review</h4>
            <p class="text-sm text-gray-600 dark:text-gray-300">Review and update your policies</p>
        </div>
        
        <div class="glass-card p-6 rounded-2xl border border-white/20 backdrop-blur-lg bg-white/10 dark:bg-gray-800/10 text-center hover:shadow-xl transition-all duration-300 cursor-pointer">
            <div class="text-4xl mb-3">üí∞</div>
            <h4 class="font-semibold text-gray-800 dark:text-white mb-2">Get Quotes</h4>
            <p class="text-sm text-gray-600 dark:text-gray-300">Compare insurance quotes</p>
        </div>
        
        <div class="glass-card p-6 rounded-2xl border border-white/20 backdrop-blur-lg bg-white/10 dark:bg-gray-800/10 text-center hover:shadow-xl transition-all duration-300 cursor-pointer">
            <div class="text-4xl mb-3">üìû</div>
            <h4 class="font-semibold text-gray-800 dark:text-white mb-2">Contact Agent</h4>
            <p class="text-sm text-gray-600 dark:text-gray-300">Speak with your insurance agent</p>
        </div>
        
        <div class="glass-card p-6 rounded-2xl border border-white/20 backdrop-blur-lg bg-white/10 dark:bg-gray-800/10 text-center hover:shadow-xl transition-all duration-300 cursor-pointer">
            <div class="text-4xl mb-3">üìä</div>
            <h4 class="font-semibold text-gray-800 dark:text-white mb-2">Coverage Analysis</h4>
            <p class="text-sm text-gray-600 dark:text-gray-300">Analyze your coverage gaps</p>
        </div>
    </div>
</div>

<style>
    .particles-container {
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }

    .particle {
        position: absolute;
        width: 3px;
        height: 3px;
        background: linear-gradient(45deg, #06b6d4, #3b82f6);
        border-radius: 50%;
        animation: float 8s ease-in-out infinite;
        opacity: 0.7;
    }

    .particle:nth-child(odd) {
        left: 15%;
        animation-duration: 10s;
    }

    .particle:nth-child(even) {
        right: 15%;
        animation-duration: 12s;
    }

    @@keyframes float {
        0%, 100% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
        10% { opacity: 0.7; }
        90% { opacity: 0.7; }
        50% { transform: translateY(-10vh) rotate(180deg); }
    }

    .glass-card {
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    }
</style>
