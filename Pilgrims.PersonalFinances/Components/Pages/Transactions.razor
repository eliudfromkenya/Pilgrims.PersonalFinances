@page "/transactions"
@using Pilgrims.PersonalFinances.Models
@using Pilgrims.PersonalFinances.Models.Enums

<PageTitle>Transactions - Pilgrims Personal Finance</PageTitle>

<!-- Particle Background -->
<div class="fixed inset-0 overflow-hidden pointer-events-none">
    <div class="absolute inset-0 bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-gray-900 dark:via-green-900 dark:to-teal-900"></div>
    <div class="particles-container">
        @for (int i = 0; i < 25; i++)
        {
            <div class="particle" style="animation-delay: @(i * 0.15)s;"></div>
        }
    </div>
</div>

<!-- Main Content -->
<div class="relative z-10 min-h-screen p-6">
    <!-- Header Section -->
    <div class="mb-8">
        <div class="glass-card p-6 rounded-2xl border border-[var(--border-color)] backdrop-blur-lg bg-[var(--card-bg)]">
            <div class="flex items-center justify-between mb-4">
                <div>
                    <h1 class="text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent">
                        üí≥ Transaction Center
                    </h1>
                    <p class="text-[var(--text-secondary)] mt-2">Track and analyze your financial transactions</p>
                </div>
                <button class="px-6 py-3 bg-gradient-to-r from-green-500 to-teal-600 text-white rounded-xl hover:shadow-lg transform hover:scale-105 transition-all duration-300">
                    <span class="mr-2">‚ûï</span> Add Transaction
                </button>
            </div>
            
            <!-- Transaction Summary Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mt-6">
                <div class="bg-gradient-to-r from-green-400 to-green-600 p-4 rounded-xl text-white">
                    <div class="text-sm opacity-90">Total Income</div>
                    <div class="text-2xl font-bold">$8,450.00</div>
                    <div class="text-xs opacity-75 mt-1">‚ÜóÔ∏è +12% this month</div>
                </div>
                <div class="bg-gradient-to-r from-red-400 to-red-600 p-4 rounded-xl text-white">
                    <div class="text-sm opacity-90">Total Expenses</div>
                    <div class="text-2xl font-bold">$5,230.75</div>
                    <div class="text-xs opacity-75 mt-1">‚ÜóÔ∏è +8% this month</div>
                </div>
                <div class="bg-gradient-to-r from-blue-400 to-blue-600 p-4 rounded-xl text-white">
                    <div class="text-sm opacity-90">Net Income</div>
                    <div class="text-2xl font-bold">+$3,219.25</div>
                    <div class="text-xs opacity-75 mt-1">‚ÜóÔ∏è +18% vs last month</div>
                </div>
                <div class="bg-gradient-to-r from-purple-400 to-purple-600 p-4 rounded-xl text-white">
                    <div class="text-sm opacity-90">Transactions</div>
                    <div class="text-2xl font-bold">127</div>
                    <div class="text-xs opacity-75 mt-1">This month</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Filters and Search -->
    <div class="glass-card p-6 rounded-2xl border border-white/20 backdrop-blur-lg bg-white/10 dark:bg-gray-800/10 mb-6">
        <div class="flex flex-wrap items-center gap-4">
            <div class="flex-1 min-w-64">
                <input type="text" placeholder="Search transactions..." 
                       class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-700/50 focus:ring-2 focus:ring-green-500 focus:border-transparent">
            </div>
            <select class="px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-700/50">
                <option>All Categories</option>
                <option>Food & Dining</option>
                <option>Transportation</option>
                <option>Shopping</option>
                <option>Bills & Utilities</option>
            </select>
            <select class="px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-700/50">
                <option>All Accounts</option>
                <option>Chase Checking</option>
                <option>Wells Fargo Savings</option>
                <option>Investment Account</option>
            </select>
            <select class="px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-700/50">
                <option>Last 30 Days</option>
                <option>Last 7 Days</option>
                <option>This Month</option>
                <option>Last Month</option>
                <option>Custom Range</option>
            </select>
        </div>
    </div>

    <!-- Analytics Section -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
        <!-- Spending Trend Chart -->
        <div class="glass-card p-6 rounded-2xl border border-white/20 backdrop-blur-lg bg-white/10 dark:bg-gray-800/10">
            <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                <span class="mr-2">üìà</span> Spending Trend (Last 7 Days)
            </h3>
            <div class="h-48 flex items-end justify-between space-x-2">
                @{
                    var dailyAmounts = new[] { 120, 85, 200, 150, 95, 180, 110 };
                    var days = new[] { "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun" };
                }
                @for (int i = 0; i < 7; i++)
                {
                    var height = (dailyAmounts[i] / 200.0) * 100;
                    <div class="flex-1 flex flex-col items-center">
                        <div class="bg-gradient-to-t from-green-500 to-emerald-600 rounded-t-lg transition-all duration-1000 hover:shadow-lg w-full" 
                             style="height: @(height)%; animation-delay: @(i * 0.1)s;">
                        </div>
                        <span class="text-xs text-gray-500 mt-2">@days[i]</span>
                        <span class="text-xs font-medium text-gray-700 dark:text-gray-300">$@dailyAmounts[i]</span>
                    </div>
                }
            </div>
        </div>

        <!-- Category Breakdown -->
        <div class="glass-card p-6 rounded-2xl border border-white/20 backdrop-blur-lg bg-white/10 dark:bg-gray-800/10">
            <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                <span class="mr-2">ü•ß</span> Category Breakdown
            </h3>
            <div class="space-y-4">
                @{
                    var categories = new[]
                    {
                        new { Name = "Food & Dining", Amount = 1250, Color = "from-red-400 to-red-600", Percentage = 35 },
                        new { Name = "Transportation", Amount = 850, Color = "from-blue-400 to-blue-600", Percentage = 24 },
                        new { Name = "Shopping", Amount = 650, Color = "from-purple-400 to-purple-600", Percentage = 18 },
                        new { Name = "Bills & Utilities", Amount = 480, Color = "from-orange-400 to-orange-600", Percentage = 13 },
                        new { Name = "Entertainment", Amount = 350, Color = "from-green-400 to-green-600", Percentage = 10 }
                    };
                }
                @foreach (var category in categories)
                {
                    <div class="flex items-center justify-between">
                        <div class="flex items-center flex-1">
                            <div class="w-4 h-4 bg-gradient-to-r @category.Color rounded-full mr-3"></div>
                            <span class="text-gray-700 dark:text-gray-300 flex-1">@category.Name</span>
                            <div class="w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-2 mx-3">
                                <div class="bg-gradient-to-r @category.Color h-2 rounded-full transition-all duration-1000" 
                                     style="width: @(category.Percentage)%"></div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="font-semibold">$@category.Amount</div>
                            <div class="text-xs text-gray-500">@category.Percentage%</div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>

    <!-- Transaction List -->
    <div class="glass-card p-6 rounded-2xl border border-white/20 backdrop-blur-lg bg-white/10 dark:bg-gray-800/10">
        <div class="flex items-center justify-between mb-6">
            <h3 class="text-xl font-semibold text-gray-800 dark:text-white flex items-center">
                <span class="mr-2">üìã</span> Recent Transactions
            </h3>
            <div class="flex items-center space-x-2">
                <button class="px-3 py-1 text-sm bg-green-100 text-green-800 rounded-full">All</button>
                <button class="px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded-full">Income</button>
                <button class="px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded-full">Expenses</button>
            </div>
        </div>
        
        <div class="space-y-3">
            @{
                var transactions = new[]
                {
                    new { Icon = "üí∞", Name = "Salary Deposit", Category = "Income", Account = "Chase Checking", Date = "Today", Amount = 4200.00m, Type = "income" },
                    new { Icon = "üçï", Name = "Pizza Palace", Category = "Food & Dining", Account = "Chase Checking", Date = "Today", Amount = -28.50m, Type = "expense" },
                    new { Icon = "‚õΩ", Name = "Shell Gas Station", Category = "Transportation", Account = "Chase Checking", Date = "Yesterday", Amount = -45.20m, Type = "expense" },
                    new { Icon = "üõí", Name = "Amazon Purchase", Category = "Shopping", Account = "Chase Checking", Date = "Yesterday", Amount = -89.99m, Type = "expense" },
                    new { Icon = "üí°", Name = "Electric Bill", Category = "Bills & Utilities", Account = "Chase Checking", Date = "2 days ago", Amount = -125.30m, Type = "expense" },
                    new { Icon = "üé¨", Name = "Netflix Subscription", Category = "Entertainment", Account = "Chase Checking", Date = "3 days ago", Amount = -15.99m, Type = "expense" },
                    new { Icon = "üè¶", Name = "Interest Payment", Category = "Income", Account = "High Yield Savings", Date = "3 days ago", Amount = 125.00m, Type = "income" },
                    new { Icon = "‚òï", Name = "Starbucks", Category = "Food & Dining", Account = "Chase Checking", Date = "4 days ago", Amount = -6.75m, Type = "expense" }
                };
            }
            
            @foreach (var transaction in transactions)
            {
                <div class="flex items-center justify-between p-4 bg-white/50 dark:bg-gray-700/50 rounded-xl hover:bg-white/70 dark:hover:bg-gray-700/70 transition-all duration-200 cursor-pointer group">
                    <div class="flex items-center flex-1">
                        <div class="w-12 h-12 bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-600 dark:to-gray-700 rounded-full flex items-center justify-center text-xl mr-4 group-hover:scale-110 transition-transform duration-200">
                            @transaction.Icon
                        </div>
                        <div class="flex-1">
                            <div class="font-medium text-gray-800 dark:text-white">@transaction.Name</div>
                            <div class="text-sm text-gray-500">@transaction.Category ‚Ä¢ @transaction.Account</div>
                        </div>
                        <div class="text-sm text-gray-500 mr-4">@transaction.Date</div>
                        <div class="text-right">
                            <div class="font-bold @(transaction.Type == "income" ? "text-green-600" : "text-red-600")">
                                @(transaction.Amount > 0 ? "+" : "")$@Math.Abs(transaction.Amount)
                            </div>
                            <div class="text-xs text-gray-500">@(transaction.Type == "income" ? "Credit" : "Debit")</div>
                        </div>
                    </div>
                    <div class="ml-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                        <button class="p-2 text-gray-400 hover:text-gray-600">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            }
        </div>
        
        <!-- Load More Button -->
        <div class="text-center mt-6">
            <button class="px-6 py-3 bg-gradient-to-r from-green-500 to-teal-600 text-white rounded-xl hover:shadow-lg transform hover:scale-105 transition-all duration-300">
                Load More Transactions
            </button>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="glass-card p-6 rounded-2xl border border-white/20 backdrop-blur-lg bg-white/10 dark:bg-gray-800/10 text-center hover:shadow-xl transition-all duration-300 cursor-pointer">
            <div class="text-4xl mb-3">üìä</div>
            <h4 class="font-semibold text-gray-800 dark:text-white mb-2">Generate Report</h4>
            <p class="text-sm text-gray-600 dark:text-gray-300">Create detailed transaction reports</p>
        </div>
        
        <div class="glass-card p-6 rounded-2xl border border-white/20 backdrop-blur-lg bg-white/10 dark:bg-gray-800/10 text-center hover:shadow-xl transition-all duration-300 cursor-pointer">
            <div class="text-4xl mb-3">üì§</div>
            <h4 class="font-semibold text-gray-800 dark:text-white mb-2">Export Data</h4>
            <p class="text-sm text-gray-600 dark:text-gray-300">Export transactions to CSV or PDF</p>
        </div>
        
        <div class="glass-card p-6 rounded-2xl border border-white/20 backdrop-blur-lg bg-white/10 dark:bg-gray-800/10 text-center hover:shadow-xl transition-all duration-300 cursor-pointer">
            <div class="text-4xl mb-3">üîÑ</div>
            <h4 class="font-semibold text-gray-800 dark:text-white mb-2">Recurring Transactions</h4>
            <p class="text-sm text-gray-600 dark:text-gray-300">Set up automatic transactions</p>
        </div>
    </div>
</div>

<style>
    .particles-container {
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }

    .particle {
        position: absolute;
        width: 3px;
        height: 3px;
        background: linear-gradient(45deg, #10b981, #14b8a6);
        border-radius: 50%;
        animation: float 8s ease-in-out infinite;
        opacity: 0.7;
    }

    .particle:nth-child(odd) {
        left: 15%;
        animation-duration: 10s;
    }

    .particle:nth-child(even) {
        right: 15%;
        animation-duration: 12s;
    }

    @@keyframes float {
        0%, 100% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
        10% { opacity: 0.7; }
        90% { opacity: 0.7; }
        50% { transform: translateY(-10vh) rotate(180deg); }
    }

    .glass-card {
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    }
</style>