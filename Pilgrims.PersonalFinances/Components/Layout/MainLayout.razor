@using Pilgrims.PersonalFinances.Components.Shared
@using Pilgrims.PersonalFinances.Components.Layout
@inherits LayoutComponentBase

<div class="page min-h-screen" style="background: var(--primary-bg);">
    <!-- Custom Title Bar -->
    <TitleBar />
    
    <!-- Mobile Menu Button -->
    <button class="md:hidden fixed top-16 left-4 z-40 p-2 rounded-lg transition-all duration-200 hover:scale-105 hover:shadow-lg" 
            style="background: var(--card-bg); border: 1px solid var(--border-color);"
            @onclick="ToggleMobileMenu">
        <svg class="w-6 h-6" style="color: var(--text-primary);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
    </button>

    <!-- Sidebar -->
    <div class="fixed left-0 top-12 h-full w-64 z-40 transform transition-transform duration-300 ease-in-out @(isMobileMenuOpen ? "translate-x-0" : "-translate-x-full md:translate-x-0")"
         style="height: calc(100vh - 3rem);">
        <NavMenu />
    </div>

    <!-- Mobile Overlay -->
    @if (isMobileMenuOpen)
    {
        <div class="fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden" @onclick="CloseMobileMenu" style="top: 3rem;"></div>
    }

    <!-- Main Content -->
    <main class="ml-0 md:ml-64 min-h-screen transition-all duration-300" style="padding-top: 3rem;">
        <!-- Content Area -->
        <article class="p-6">
            @Body
        </article>
    </main>
</div>

@code {
    private bool isMobileMenuOpen = false;

    private void ToggleMobileMenu()
    {
        isMobileMenuOpen = !isMobileMenuOpen;
    }

    private void CloseMobileMenu()
    {
        isMobileMenuOpen = false;
    }
}
