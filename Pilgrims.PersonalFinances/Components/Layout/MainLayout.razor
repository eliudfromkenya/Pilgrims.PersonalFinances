@using Pilgrims.PersonalFinances.Components.Shared
@inherits LayoutComponentBase

<div class="page min-h-screen" style="background: var(--primary-bg);">
    <!-- Mobile Menu Button -->
    <button class="md:hidden fixed top-4 left-4 z-50 p-2 rounded-lg transition-all duration-200 hover:scale-105 hover:shadow-lg" 
            style="background: var(--card-bg); border: 1px solid var(--border-color);"
            @onclick="ToggleMobileMenu">
        <svg class="w-6 h-6" style="color: var(--text-primary);" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
    </button>

    <!-- Sidebar -->
    <div class="fixed left-0 top-0 h-full w-64 z-40 transform transition-transform duration-300 ease-in-out @(isMobileMenuOpen ? "translate-x-0" : "-translate-x-full md:translate-x-0")">
        <NavMenu />
    </div>

    <!-- Mobile Overlay -->
    @if (isMobileMenuOpen)
    {
        <div class="fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden" @onclick="CloseMobileMenu"></div>
    }

    <!-- Main Content -->
    <main class="ml-0 md:ml-64 min-h-screen transition-all duration-300">
        <!-- Top Bar -->
        <div class="shadow-sm px-6 py-4 flex justify-between items-center pl-16 md:pl-6" 
             style="background: var(--card-bg); border-bottom: 1px solid var(--border-color);">
            <h1 class="text-xl md:text-xl text-lg font-semibold" style="color: var(--text-primary);">
                Personal Finance Management
            </h1>
            <div class="flex items-center space-x-2 md:space-x-4">
                <ThemeSelector />
                <button class="text-sm px-4 py-2 rounded-lg transition-all duration-300"
                        style="background: var(--tertiary-bg); color: var(--text-primary); border: 1px solid var(--border-color);">
                    ðŸ‘¤ Profile
                </button>
                <a href="https://learn.microsoft.com/aspnet/core/" target="_blank" 
                   class="text-sm font-medium transition-colors duration-300 px-3 py-2 rounded-lg hover:bg-opacity-10"
                   style="color: var(--accent-color);">
                    ðŸ“š Docs
                </a>
            </div>
        </div>

        <!-- Content Area -->
        <article class="p-6">
            @Body
        </article>
    </main>
</div>

@code {
    private bool isMobileMenuOpen = false;

    private void ToggleMobileMenu()
    {
        isMobileMenuOpen = !isMobileMenuOpen;
    }

    private void CloseMobileMenu()
    {
        isMobileMenuOpen = false;
    }
}
